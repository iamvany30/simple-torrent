export class StreamServer{constructor(t){this.client=t,this.server=null,this.port=0}start(){this.server||(this.server=this.client.createServer(),this.server.listen(0,()=>{this.port=this.server.address().port,console.log(`[StreamServer] Listening on http://localhost:${this.port}`)}))}stop(){this.server&&(this.server.close(),this.server=null)}getStreamUrl(t){if(!this.server||!t||!t._torrent)return null;const r=t.path.split("/").map(encodeURIComponent).join("/");return`http://localhost:${this.port}/webtorrent/${t._torrent.infoHash}/${r}`}}