export class StreamServer{constructor(r){this.client=r,this.server=null,this.port=0}start(){this.server||(this.server=this.client.createServer(),this.server.listen(0,()=>{this.port=this.server.address().port,console.log(`[StreamServer] Streaming server listening on http://localhost:${this.port}`)}))}stop(){this.server&&(this.server.close(),this.server=null)}getStreamUrl(r){if(!this.server||!r)return null;const t=r._torrent;return t?`http://localhost:${this.port}/webtorrent/${t.infoHash}/${r.path}`:null}}