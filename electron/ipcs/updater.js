import{torrentEngine}from"../torrent/index.js";export function startUpdaterLoop(e){const r=setInterval(()=>{if(e&&!e.isDestroyed()){const r=torrentEngine.getSummary(),t=r.torrents.filter(e=>!e.isPaused&&e.progress<1);if(t.length>0){const r=t.reduce((e,r)=>e+r.progress,0)/t.length;e.setProgressBar(r)}else e.setProgressBar(-1);e.webContents.send("torrent:update",r)}else clearInterval(r)},1e3);return r}