import{ipcMain,dialog,app}from"electron";import{torrentEngine}from"../torrent/index.js";export function setupSystemIPC(e,t){ipcMain.handle("settings:get",()=>torrentEngine.getConfig()),ipcMain.handle("settings:set",(e,t)=>(torrentEngine.saveConfig(t),app.setLoginItemSettings({openAtLogin:t.autoLaunch,openAsHidden:!0}),{success:!0})),ipcMain.handle("app:reset",()=>(torrentEngine.hardReset(),t(),e&&e.setProgressBar(-1),{success:!0})),ipcMain.handle("dialog:select-folder",async(t,n={})=>{const i=n.title||"Select Folder",{canceled:o,filePaths:r}=await dialog.showOpenDialog(e,{title:i,properties:["openDirectory"]});return o?null:r[0]}),ipcMain.handle("dialog:open-torrent",async(t,n={})=>{const i=n.title||"Select .torrent file",{canceled:o,filePaths:r}=await dialog.showOpenDialog(e,{title:i,properties:["openFile"],filters:[{name:"Torrent Files",extensions:["torrent"]}]});return o?null:r[0]})}