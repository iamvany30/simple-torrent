import{ipcMain}from"electron";import{torrentEngine}from"../torrent/index.js";export function setupTorrentIPC(e,r){torrentEngine.on("metadata",()=>r()),torrentEngine.on("torrentAdded",()=>r()),torrentEngine.on("torrentRemoved",()=>r()),torrentEngine.on("torrentPaused",()=>r()),torrentEngine.on("torrentResumed",()=>r()),torrentEngine.on("complete",()=>r()),torrentEngine.on("insufficientSpace",()=>r()),torrentEngine.on("error",e=>{console.error("Engine sent error:",e),r()}),ipcMain.handle("torrent:inspect",async(e,r)=>{try{return{success:!0,data:await torrentEngine.inspectTorrent(r)}}catch(e){return{success:!1,error:e.message}}}),ipcMain.handle("torrent:start",async(e,n)=>{try{return await torrentEngine.startDownload(n.magnetURI,n),r(),{success:!0}}catch(e){return{success:!1,error:e.message}}}),ipcMain.handle("torrent:pause",(e,n)=>(torrentEngine.pauseTorrent(n),r(),{success:!0})),ipcMain.handle("torrent:resume",(e,n)=>(torrentEngine.resumeTorrent(n),r(),{success:!0})),ipcMain.handle("torrent:remove",(e,{id:n,deleteFiles:t})=>(torrentEngine.removeTorrent(n,t),r(),{success:!0})),ipcMain.handle("torrent:create",async(e,r)=>{try{return{success:!0,data:await torrentEngine.createTorrent(r)}}catch(e){return{success:!1,error:e.message}}})}